FROM adoptopenjdk/openjdk11

MAINTAINER JINKYUM PARK
WORKDIR ./

ARG JAR_FILE_PATH=./build/libs/*.jar

ARG ALADIN_SECRET
ARG DATA4LIBRARY_SECRET
ARG NAVER_SECRET
ARG NAVER_CLIENT
ARG GOOGLE_SECRET
ARG GOOGLE_CX
ARG DB_URL
ARG DB_ID
ARG DB_PW

ENV ALADIN_SECRET=$ALADIN_SECRET
ENV DATA4LIBRARY_SECRET=$DATA4LIBRARY_SECRET
ENV NAVER_SECRET=$NAVER_SECRET
ENV NAVER_CLIENT=$NAVER_CLIENT
ENV GOOGLE_SECRET=$GOOGLE_SECRET
ENV GOOGLE_CX=$GOOGLE_CX
ENV DB_URL=$DB_URL
ENV DB_ID=$DB_ID
ENV DB_PW=$DB_PW

EXPOSE 8100

CMD ["./mvnw", "clean", "build"]
COPY ${JAR_FILE_PATH} ./bookitout.jar
ENTRYPOINT ["java", "-jar", "bookitout.jar"]