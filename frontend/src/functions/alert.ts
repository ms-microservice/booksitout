import { getDateDifferenceInDays } from './date'

const getAlertMessage = (): string => {
	const name: string = localStorage.getItem('user-name') ?? ''

	const year: number = new Date().getFullYear()
	const month: number = (new Date().getMonth() % 12) + 1
	const day: number = new Date().getDate()
	const date: string = `${month} ${day}`

	const dateToMessageMap: Map<string, string> = new Map([
		// ë²•ì • ê³µíœ´ì¼
		[`1, 1`, `ìƒˆí•´ê°€ ë°ì•˜ë„¤ìš”! ì´ë²ˆë…„ë„ëŠ” ì–´ë–¤ ì±…ì„ ì½ì„ ì˜ˆì •ì´ì‹ ê°€ìš”? ì•„ì§ ì„¤ì • ì•ˆ í•˜ì…¨ë‹¤ë©´ ${year}ë…„ë„ ëª©í‘œë¥¼ ì„¤ì •í•´ ë³´ì„¸ìš”!`],
		[`3 3`, ``],
		[`4 7`, ``],
		[`5 5`, `ì˜¤ëŠ˜ì€ ì–´ë¦°ì´ë‚ ì´ì—ìš”!`],
		[`6 6`, `ì˜¤ëŠ˜ì€ í˜„ì¶©ì¼ì´ì—ìš”. ìš°ë¦¬ê°€ í‰í™”ë¡­ê²Œ ì±…ì„ ì½ì„ ìˆ˜ ìžˆëŠ”ê²ƒë„ ëˆ„êµ°ê°€ê°€ ëŒ€í•œë¯¼êµ­ì˜ ìžìœ ë¯¼ì£¼ì£¼ì˜ë¥¼ ìœ„í•´ ì‹¸ì› ê¸° ë•Œ`],
		[`8 15`, ``],
		[`10 3`, `ì˜¤ëŠ˜ì€ ëŒ€í•œë¯¼êµ­ì˜ í—Œë²•ì´ ë§Œë“¤ì–´ì§„ ê°œì²œì ˆì´ì—ìš”. ðŸ‡°ðŸ‡·`],
		[`10 9`, `ì˜¤ëŠ˜ì€ í•œê¸€ë‚ ì´ì—ìš”! ðŸ‡°ðŸ‡· í•œê¸€ ë•ë¶„ì— ìš°ë¦¬ê°€ í•œìžë¥¼ ë°°ìš°ì§€ ì•Šê³ ë„ íŽ¸í•˜ê²Œ ì±…ì„ ì½ì„ ìˆ˜ ìžˆì–´ì„œ ì •ë§ ê°ì‚¬í•˜ì§€ ì•Šë‚˜ìš”? â˜ºï¸`],
		[`12 25`, `í¬ë¦¬ìŠ¤ë§ˆìŠ¤ì—ë„ ë…ì„œí•˜ëŸ¬ ì˜¤ì‹œë‹¤ë‹ˆ, ${name}ë‹˜ì€ ì§„ì •í•œ ì±…ë²Œëž˜ì‹œë„¤ìš”! ìž¬ë°ŒëŠ” ì±… ì½ìœ¼ì‹œê³  ì¦ê±°ìš´ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ë³´ë‚´ì„¸ìš”! ðŸŽ„ðŸŽ…`],

		// ê¸°ë…ì¼ ì „ë‚ 
		[
			`12 31`,
			`ì˜¤ëŠ˜ì€ ${new Date().getFullYear()}ë…„ì˜ ë§ˆì§€ë§‰ ë‚ ì´ì—ìš”. ì´ë²ˆë…„ë„ì— í•œ ë‘‘ì„œí™œë™ì„ ë˜ëŒì•„ ë³´ë©° ë‚´ë…„ ë…ì„œ ê³„íšì„ ì„¸ì›Œ ë³´ì‹œëŠ”ê±´ ì–´ë– ì‹ ê°€ìš”?`,
		],

		// ê³¼ê±° ë²•ì • ê³µíœ´ì¼
		[`4 5`, `ì˜¤ëŠ˜ì€ ì‹ëª©ì¼ì´ì—ìš”! ðŸŒ³ ì±…ë²Œëž˜ë“¤ì˜ ìƒì§•ì¸ ë‚˜ë¬´ë‹˜ê»˜ ê°ì‚¬ë¥¼...`],

		// ìž˜ ì•Œë ¤ì§„ ê¸°ë…ì¼
		[`5 8`, `ì˜¤ëŠ˜ì€ ì–´ë²„ì´ì˜ ë‚ ì´ì—ìš”. ðŸ‘¨â€ðŸ‘¨â€ðŸ‘§â€ðŸ‘¦ `],
		[`5 23`, `ì˜¤ëŠ˜ì€ ìŠ¤ìŠ¹ì˜ ë‚ ì´ì—ìš”! ðŸ‘©â€ðŸ«ðŸ‘¨â€ðŸ«`],
		[`6 25`, `ì˜¤ëŠ˜ì€ 625 ì „ìŸì¼ì´ì—ìš”. ëŒ€í•œë¯¼êµ­ì„ ì§€í‚¤ê¸° ìœ„í•´ í¬ìƒí•˜ì‹  ëª¨ë“  ë¶„ë“¤ê»˜ ìž ê¹ ë¬µë… ì–´ë– ì‹ ê°€ìš”?`],

		// ìž¬ë¯¸ìžˆëŠ” ê¸°ë…ì¼
		[`10 31`, `í•´í”¼ í• ë¡œìœˆ! ðŸŽƒ í• ë¡œìœˆì¸ ì˜¤ëŠ˜, ì˜¤ì‹¹í•œ ì†Œì„¤ ì–´ë– ì‹ ê°€ìš”? ðŸ‘»`],
		[`11 11`, `í•´í”¼ ë¹¼ë¹¼ë¡œ ë°ì´! ë¹¼ë¹¼ë¡œëŠ” ë§Žì´ ë°›ìœ¼ì…¨ë‚˜ìš”?`],

		// ìƒì†Œí•œ ê¸°ë…ì¼
		[
			`9 7`,
			`ì˜¤ëŠ˜ì€ í‘¸ë¥¸ í•˜ëŠ˜ì˜ ë‚ ì´ë¼ê³  í•´ìš”! ðŸŒ¥ï¸ ë¯¸ì„¸ë¨¼ì§€ë¡œ ì–´ëŠì„¸ í‘¸ë¥¸í•˜ëŠ˜ì´ ë‚¯ì„¤ì–´ ì¡Œì§€ë§Œ, í‘¸ë¥¸ í•˜ëŠ˜ ë“¤íŒì— ì•‰ì•„ í•˜ëŠ” ë…ì„œê°€ ìµœê³¤ë°, ì±…ë²Œëž˜ì¸ ${name}ë‹˜ë„ ì•„ì‹œê² ì£ ? ðŸ˜‰`,
		],
		[`10 2`, `ì˜¤ëŠ˜ì€ ë…¸ì¸ì˜ ë‚ ì´ì—ìš”! ðŸ‘´ðŸ§“ ë‚˜ì´ë“¤ì–´ì„œë„ ë…ì„œë¥¼ ë†“ì¹˜ ì•Šìœ¼ì‹œê³  ì§€ì‹ì„ ìŒ“ëŠ” ì–´ë¥´ì‹ ë“¤ì„ ë³´ë©´ ë„ˆë¬´ ë©‹ìžˆëŠ”ê±° ê°™ì•„ìš”`],
	])

	return dateToMessageMap.get(date) ?? `ì–´ì„œì˜¤ì„¸ìš”, ${name != null ? `${name}ë‹˜!` : ''} ì˜¤ëŠ˜ë„ ë§ˆìŒì˜ ì–‘ì‹ì„ ì„­ì·¨í•˜ëŸ¬ ì˜¤ì…¨êµ°ìš” ðŸ˜‰`
}

const getIsAlertShowing = (): boolean => {
	const dateDifference: number = getDateDifferenceInDays(new Date(), new Date(localStorage.getItem('main-alert') ?? new Date(1999)))

	return dateDifference > 1
}

const updateAlertCloseTime = (): void => {
	localStorage.setItem('main-alert', new Date().toString())
}

export { getAlertMessage, getIsAlertShowing, updateAlertCloseTime }
